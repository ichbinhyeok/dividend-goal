<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3533137832089555" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V3151LZWH6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-V3151LZWH6');
    </script>

    <meta charset="UTF-8">
    <link rel="icon" href="https://fav.farm/üí∞" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${pageTitle}">Dividend Result</title>
    <meta name="description" th:attr="content=${pageDescription}">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Money First">
    <meta property="og:title" th:content="${pageTitle}">
    <meta property="og:description" th:content="${pageDescription}">
    <meta property="og:image" content="https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?auto=format&fit=crop&w=1200&q=80">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --primary-color: #0f172a;
            --accent-color: #10b981;
            --bg-color: #f1f5f9;
            --card-bg: #ffffff;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: #334155; line-height: 1.6; }
        .card-glow { background: var(--card-bg); border: none; border-radius: 20px; box-shadow: 0 10px 40px -10px rgba(0,0,0,0.08); }
        h1, h2, h3 { color: var(--primary-color); letter-spacing: -0.02em; }
        .result-box { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 16px; padding: 2rem; text-align: center; }
        .result-number { font-size: 3rem; font-weight: 800; color: #059669; margin: 0.5rem 0; letter-spacing: -1px; }
        .form-control, .form-select { border-radius: 12px; padding: 0.8rem 1rem; border: 1px solid #e2e8f0; font-size: 1.1rem; }
        .form-control:focus, .form-select:focus { border-color: var(--accent-color); box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1); }
        .btn-primary { background-color: var(--primary-color); border: none; border-radius: 12px; font-weight: 600; padding: 1rem; }
        .btn-outline-primary { color: var(--primary-color); border-color: var(--primary-color); border-radius: 12px; padding: 1rem; font-weight: 600; }
        .ad-slot { background: transparent; border: 2px dashed #cbd5e1; border-radius: 12px; color: #94a3b8; padding: 20px; text-align: center; margin: 2rem 0; }
        .table-custom th { background-color: #f8fafc; color: #64748b; font-weight: 600; text-transform: uppercase; font-size: 0.85rem; border-top: none; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg py-3 bg-white border-bottom sticky-top">
    <div class="container">
        <a class="navbar-brand fw-bold fs-4" href="/" style="color: var(--primary-color);">üí∏ Money First</a>
        <button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto gap-2 text-center mt-3 mt-lg-0">
                <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="/">Calculator</a></li>
                <li class="nav-item"><a class="nav-link fw-semibold text-dark" href="/articles">Articles</a></li>
                <li class="nav-item"><a class="nav-link fw-semibold text-muted" href="/about">About</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container pb-5 mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8 ad-slot">Top AdSense Placeholder</div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-10 card-glow p-4 p-md-5">

            <div class="d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4 border-bottom pb-4">
                <div>
                    <span class="badge bg-dark mb-2" th:if="${calculationMode == 'TARGET'}">Capital Required</span>
                    <span class="badge bg-success mb-2" th:if="${calculationMode == 'INCOME'}">Income Projection</span>

                    <h1 class="h3 fw-bold mb-1" th:if="${calculationMode == 'TARGET'}">Target: $<span th:text="${#numbers.formatDecimal(monthlyAmount, 0, 'COMMA', 0, 'POINT')}">0</span> / Month</h1>
                    <h1 class="h3 fw-bold mb-1" th:if="${calculationMode == 'INCOME'}">Projected Monthly Income</h1>

                    <p class="text-muted mb-0">
                        Ticker: <strong th:text="${stock.ticker}">TICKER</strong> <span class="mx-2">‚Ä¢</span>
                        Yield: <strong th:text="${stock.yield} + '%'">0%</strong> <span class="mx-2">‚Ä¢</span>
                        Growth (5yr): <strong th:text="${stock.dividendGrowth} + '%'">0%</strong>
                    </p>
                </div>
                <div class="text-end d-none d-md-block">
                    <div class="text-muted small">Sector</div>
                    <div class="fw-semibold" th:text="${stock.sector}">Sector</div>
                </div>
            </div>

            <div class="row g-4 justify-content-center">
                <div class="col-md-12">
                    <div class="result-box">
                        <div class="text-uppercase fw-bold small" style="color: #059669; opacity: 0.8;"
                             th:text="${calculationMode == 'TARGET' ? 'Estimated Capital Needed (Today)' : 'Estimated Monthly Income'}">Result Label</div>

                        <div class="result-number">
                            <span th:if="${calculationMode == 'TARGET'}">$<span th:text="${formattedRequiredInvestment}">0</span></span>
                            <span th:if="${calculationMode == 'INCOME'}">$<span th:text="${#numbers.formatDecimal(monthlyIncome, 0, 'COMMA', 0, 'POINT')}">0</span></span>
                        </div>

                        <div class="text-muted small">
                            <span th:if="${calculationMode == 'TARGET'}">to generate $<span th:text="${#numbers.formatDecimal(monthlyAmount, 0, 'COMMA', 0, 'POINT')}">0</span> monthly immediately</span>
                            <span th:if="${calculationMode == 'INCOME'}">generated from your capital</span>
                        </div>
                    </div>

                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <button onclick="shareTwitter()" class="btn btn-dark btn-sm rounded-pill px-3">üê¶ Share on X</button>
                        <button onclick="copyLink()" class="btn btn-light btn-sm rounded-pill px-3 border">üîó Copy Link</button>
                    </div>
                </div>
            </div>

            <div class="mt-4" th:if="${timeMachine != null}">
                <h3 class="h5 fw-bold mb-3">‚è≥ The Waiting Game: Save Money by Holding</h3>
                <p class="text-muted small mb-3">
                    Currently, you need <strong class="text-dark">$<span th:text="${formattedRequiredInvestment}">0</span></strong>.
                    But if <span th:text="${stock.ticker}">TICKER</span> grows its dividend by
                    <span class="text-success fw-bold" th:text="${stock.dividendGrowth} + '%'">0%</span> annually,
                    you can invest <strong>less</strong> today and hit your goal later.
                </p>

                <div class="row row-cols-2 row-cols-md-4 g-3 text-center">
                    <div class="col" th:each="item : ${timeMachine}">
                        <div class="p-3 bg-white rounded-4 border h-100 shadow-sm" style="border-color: #e2e8f0;">
                            <div class="text-uppercase text-muted fw-bold" style="font-size: 0.75rem;">
                                Wait <span th:text="${item.year}">1</span> Years
                            </div>
                            <div class="fw-bold fs-5 text-dark my-1">
                                $<span th:text="${#numbers.formatDecimal(item.capital, 0, 'COMMA', 0, 'POINT')}">0</span>
                            </div>
                            <div class="badge bg-success bg-opacity-10 text-success fw-normal px-2 py-1" style="font-size: 0.8rem;">
                                Save $<span th:text="${#numbers.formatDecimal(item.saved, 0, 'COMMA', 0, 'POINT')}">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-muted text-center mt-2" style="font-size: 0.75rem;">
                    *Assumes constant dividend reinvestment is NOT included, only dividend growth.
                </p>
            </div>

            <div class="ad-slot my-4">Mid-Content AdSense</div>

            <div class="p-4 bg-light rounded-4 mt-4">
                <h3 class="h5 fw-bold mb-3">Adjust Calculation</h3>
                <div class="row gy-4">
                    <div class="col-lg-12">
                        <form class="row g-3 align-items-end" method="post" action="/calculate">
                            <div class="col-md-5">
                                <label class="form-label small fw-bold text-muted">Target Monthly Goal</label>
                                <div class="input-group"><span class="input-group-text">$</span><input class="form-control" type="number" name="amount" th:value="${#numbers.formatDecimal(monthlyAmount, 0, 'NONE', 0, 'POINT')}" required></div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small fw-bold text-muted">Ticker (Searchable)</label>
                                <input class="form-control" list="stockOptions" name="ticker" th:value="${stock.ticker}" placeholder="Type ticker..." required autocomplete="off">
                            </div>
                            <div class="col-md-3"><button class="btn btn-primary w-100" type="submit">Recalculate</button></div>
                        </form>
                    </div>

                    <div class="col-lg-12 pt-3 border-top">
                        <form class="row g-3 align-items-end" th:action="@{'/how-much-income/' + ${capitalInput} + '/' + ${stock.ticker}}" method="get" onsubmit="event.preventDefault(); const c=document.getElementById('cInput').value; const t=document.getElementById('tInput').value; window.location='/how-much-income/'+Math.round(c)+'/'+t;">
                            <div class="col-md-5">
                                <label class="form-label small fw-bold text-muted">Invested Capital</label>
                                <div class="input-group"><span class="input-group-text">$</span><input class="form-control" id="cInput" type="number" th:value="${#numbers.formatDecimal(capitalInput, 0, 'NONE', 0, 'POINT')}" required></div>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label small fw-bold text-muted">Ticker (Searchable)</label>
                                <input class="form-control" list="stockOptions" id="tInput" th:value="${stock.ticker}" placeholder="Type ticker..." required autocomplete="off">
                            </div>
                            <div class="col-md-3"><button class="btn btn-outline-primary w-100" type="submit">Check Income</button></div>
                        </form>
                    </div>
                </div>
            </div>

            <datalist id="stockOptions">
                <option th:each="item : ${stocks}" th:value="${item.ticker}" th:text="${item.name}"></option>
            </datalist>

            <div class="mt-5">
                <h3 class="h5 fw-bold mb-3">‚òÉÔ∏è The Snowball Effect (10-Year DRIP)</h3>
                <p class="text-muted small mb-3">Reinvesting all dividends with constant yield:</p>
                <div class="table-responsive">
                    <table class="table table-custom table-hover">
                        <thead><tr><th>Year</th><th>Total Value</th><th>Monthly Income</th></tr></thead>
                        <tbody>
                        <tr th:each="proj : ${dripProjections}">
                            <td>Year <span th:text="${proj.year}">1</span></td>
                            <td class="fw-bold">$<span th:text="${#numbers.formatDecimal(proj.estimatedCapital, 0, 'COMMA', 0, 'POINT')}">0</span></td>
                            <td class="text-accent">+$<span th:text="${#numbers.formatDecimal(proj.estimatedMonthlyIncome, 0, 'COMMA', 0, 'POINT')}">0</span>/mo</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mt-5 p-4 rounded-4" style="background-color: #f8fafc; border-left: 5px solid var(--primary-color);">
                <h3 class="h6 fw-bold text-uppercase text-muted mb-2">Real Life Impact</h3>
                <p class="mb-0 fs-5" th:text="${lifestyleMeaning}">Impact text...</p>
            </div>

            <div class="mt-5 text-secondary">
                <h3 class="h5 fw-bold text-dark mb-3">Analysis Breakdown</h3>
                <div class="mb-3"><h4 class="h6 fw-bold text-dark">Introduction</h4><p th:text="${content.introduction}" class="small">Intro</p></div>
                <div class="mb-3"><h4 class="h6 fw-bold text-dark">About <span th:text="${stock.ticker}"></span></h4><p th:text="${content.whatIsTicker}" class="small">Info</p></div>
                <div class="mb-3"><h4 class="h6 fw-bold text-dark">Investment Context</h4><p th:text="${content.investingAngle}" class="small">Context</p></div>
                <div class="mt-4 pt-3 border-top"><p th:text="${content.disclaimer}" class="small text-muted fst-italic">Disclaimer</p></div>
            </div>

            <div class="ad-slot">Bottom AdSense</div>

            <footer class="mt-5 pt-4 border-top">
                <div class="d-flex flex-wrap justify-content-center gap-4 text-muted small">
                    <a href="/" class="text-decoration-none text-muted fw-bold">Calculator</a>
                    <a href="/articles" class="text-decoration-none text-muted fw-bold">Articles</a>
                    <a href="/about" class="text-decoration-none text-muted">About</a>
                    <a href="/privacy-policy" class="text-decoration-none text-muted">Privacy</a>
                    <a href="/disclaimer" class="text-decoration-none text-muted">Disclaimer</a>
                    <a href="/sitemap.xml" class="text-decoration-none text-muted">Sitemap</a>
                </div>
                <div class="text-center mt-3 text-muted" style="font-size: 0.75rem;">
                    &copy; 2026 Money First. All rights reserved.
                </div>
            </footer>
        </div>
    </div>
</div>

<script>
    function shareTwitter() {
        const text = "I need $" + "[[${formattedRequiredInvestment}]]" + " to earn monthly dividends! üí∏ Check yours:";
        const url = window.location.href;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
    }
    function copyLink() {
        navigator.clipboard.writeText(window.location.href);
        alert("Link copied to clipboard! üìã");
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>