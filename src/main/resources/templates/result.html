<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${pageTitle}">Dividend Result</title>
    <meta name="description" th:attr="content=${pageDescription}" content="Detailed dividend investment requirement.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body { background: #f7f9fb; }
        .card-glow { background: #ffffff; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border-radius: 12px; }
        .ad-slot { background: #eef3f7; border: 1px dashed #c4d3e0; color: #5b6b7c; padding: 12px; text-align: center; font-size: 0.9rem; }
        .result-number { font-size: 2.4rem; font-weight: 800; }
    </style>
</head>
<body>
<div class="container py-5">
    <div class="row justify-content-center mb-4">
        <div class="col-lg-8 ad-slot">
            Top AdSense Placeholder (728x90)
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-9 card-glow p-4 p-md-5">
            <div class="d-flex align-items-start justify-content-between flex-wrap gap-3">
                <div>
                    <p class="text-uppercase fw-semibold text-primary mb-1" th:if="${calculationMode == 'TARGET'}">How much capital is required in <span th:text="${stock.ticker}">TICKER</span> for $<span th:text="${#numbers.formatDecimal(monthlyAmount, 0, 'COMMA', 0, 'POINT')}">0</span>/month?</p>
                    <p class="text-uppercase fw-semibold text-primary mb-1" th:if="${calculationMode == 'INCOME'}">How much income could $<span th:text="${#numbers.formatDecimal(capitalInput, 0, 'COMMA', 0, 'POINT')}">0</span> in <span th:text="${stock.ticker}">TICKER</span> illustrate?</p>
                    <h1 class="fw-bold mb-2" th:if="${calculationMode == 'TARGET'}">Dividend target: $<span th:text="${#numbers.formatDecimal(monthlyAmount, 0, 'COMMA', 0, 'POINT')}">0</span> per month</h1>
                    <h1 class="fw-bold mb-2" th:if="${calculationMode == 'INCOME'}">Illustrated monthly income: $<span th:text="${#numbers.formatDecimal(monthlyIncome, 0, 'COMMA', 0, 'POINT')}">0</span></h1>
                    <p class="text-muted mb-0">Using trailing yield to keep the math simple and fully educational.</p>
                </div>
                <div class="text-end">
                    <div class="fw-semibold text-secondary">Ticker: <span th:text="${stock.ticker}">TICKER</span></div>
                    <div class="fw-semibold text-secondary">Yield: <span th:text="${stock.yield}">0</span>%</div>
                    <div class="text-muted small" th:text="'Payout: ' + ${stock.frequency} + ' â€¢ Risk: ' + ${stock.risk}">Frequency</div>
                    <div class="text-muted small" th:text="'Years of payouts: ' + ${stock.dividendYears}">Years</div>
                </div>
            </div>

            <div class="row mt-4 g-3" th:if="${calculationMode == 'TARGET'}">
                <div class="col-md-12">
                    <div class="p-4 bg-light border rounded-3">
                        <div class="text-uppercase text-muted fw-semibold small mb-2">Estimated Capital Needed</div>
                        <div class="result-number text-success">$<span th:text="${formattedRequiredInvestment}">0</span></div>
                        <div class="text-muted">Estimated to target <span th:text="${#numbers.formatDecimal(monthlyAmount * 12, 0, 'COMMA', 0, 'POINT')}">0</span> annually in dividends.</div>
                    </div>
                </div>
            </div>

            <div class="row mt-4 g-3" th:if="${calculationMode == 'INCOME'}">
                <div class="col-md-12">
                    <div class="p-4 bg-light border rounded-3">
                        <div class="text-uppercase text-muted fw-semibold small mb-2">Estimated Monthly Income</div>
                        <div class="result-number text-success">$<span th:text="${#numbers.formatDecimal(monthlyIncome, 0, 'COMMA', 0, 'POINT')}">0</span></div>
                        <div class="text-muted">Based on $<span th:text="${formattedRequiredInvestment}">0</span> illustrated capital and the current trailing yield.</div>
                    </div>
                </div>
            </div>

            <div class="row mt-3 g-3">
                <div class="col-md-12 ad-slot">
                    Mid-page AdSense Placeholder (300x250)
                </div>
            </div>

            <div class="mt-4">
                <h2 class="h4 fw-bold">Adjust your goal</h2>
                <div class="row gy-3">
                    <div class="col-12">
                        <form class="row gy-3" method="post" action="/calculate">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Target monthly income (USD)</label>
                                <div class="input-group input-group-lg">
                                    <span class="input-group-text">$</span>
                                    <input class="form-control" type="number" name="amount" min="1" step="50" th:value="${monthlyAmount}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Dividend ticker</label>
                                <select class="form-select form-select-lg" name="ticker" required>
                                    <option th:each="item : ${stocks}" th:value="${item.ticker}" th:selected="${item.ticker == stock.ticker}" th:text="${item.ticker + ' - ' + item.name}">SCHD - Example</option>
                                </select>
                            </div>
                            <div class="col-12 d-grid">
                                <button class="btn btn-primary btn-lg py-3" type="submit">Recalculate required capital</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-12">
                        <form class="row gy-3" th:action="@{'/how-much-income/' + ${capitalInput} + '/' + ${stock.ticker}}" method="get" onsubmit="event.preventDefault(); const capital=document.getElementById('resultCapitalInput'); const ticker=document.getElementById('resultCapitalTicker'); if(!capital.value||!ticker.value){return;} window.location='/how-much-income/'+Math.round(capital.value) + '/' + ticker.value;">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Illustrate income from capital (USD)</label>
                                <div class="input-group input-group-lg">
                                    <span class="input-group-text">$</span>
                                    <input class="form-control" id="resultCapitalInput" type="number" min="1" step="500" th:value="${capitalInput}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold">Dividend ticker</label>
                                <select class="form-select form-select-lg" id="resultCapitalTicker" required>
                                    <option th:each="item : ${stocks}" th:value="${item.ticker}" th:selected="${item.ticker == stock.ticker}" th:text="${item.ticker + ' - ' + item.name}">SCHD - Example</option>
                                </select>
                            </div>
                            <div class="col-12 d-grid">
                                <button class="btn btn-outline-primary btn-lg py-3" type="submit">Estimate monthly income</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <h2 class="h4 fw-bold">10-year DRIP illustration</h2>
                <p class="text-muted mb-3">Illustration only. No price appreciation assumed. Dividends are fully reinvested at a constant yield.</p>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Year</th>
                            <th>Estimated total capital</th>
                            <th>Estimated monthly income</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="projection : ${dripProjections}">
                            <td th:text="${projection.year}">1</td>
                            <td th:text="${'$' + #numbers.formatDecimal(projection.estimatedCapital, 0, 'COMMA', 2, 'POINT')}">$0</td>
                            <td th:text="${'$' + #numbers.formatDecimal(projection.estimatedMonthlyIncome, 0, 'COMMA', 2, 'POINT')}">$0</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mt-4">
                <h2 class="h4 fw-bold">Lifestyle meaning</h2>
                <p th:text="${lifestyleMeaning}">Lifestyle text</p>
            </div>

            <div class="mt-4">
                <h2 class="h4 fw-bold">Detailed breakdown</h2>
                <p th:text="${content.introduction}">Intro content</p>
                <p th:text="${content.whatIsTicker}">What is ticker</p>
                <p th:text="${content.realLifeMeaning}">Real life meaning</p>
                <p th:text="${content.investingAngle}">Investing angle</p>
                <p th:text="${content.disclaimer}">Disclaimer</p>
            </div>

            <div class="row mt-4 g-3">
                <div class="col-md-12 ad-slot">
                    Bottom AdSense Placeholder (728x90)
                </div>
            </div>
            <footer class="mt-5 pt-4 border-top d-flex flex-wrap gap-3 text-muted small">
                <a href="/about" class="link-secondary">About</a>
                <a href="/privacy-policy" class="link-secondary">Privacy Policy</a>
                <a href="/disclaimer" class="link-secondary">Disclaimer</a>
                <a href="/sitemap.xml" class="link-secondary">Sitemap</a>
            </footer>
        </div>
    </div>
</div>
</body>
</html>
